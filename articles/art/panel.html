<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="metrics.in.r">
<title>Panel Data and Fixed Effects Regression • metrics.in.r</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Panel Data and Fixed Effects Regression">
<meta property="og:description" content="metrics.in.r">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">metrics.in.r</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../articles/metrics-in-r.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../../articles/index.html">Articles</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/nateybear/metrics-in-r/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Panel Data and Fixed Effects Regression</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/nateybear/metrics-in-r/blob/HEAD/vignettes/art/panel.Rmd" class="external-link"><code>vignettes/art/panel.Rmd</code></a></small>
      <div class="d-none name"><code>panel.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="idea">Idea<a class="anchor" aria-label="anchor" href="#idea"></a>
</h2>
<p>Fixed effects regression is one of those things that we don’t
necessarily need another package to do. We could do it ourselves with
the standard linear model tools, either in R or Stata. Hence, we should
set the bar pretty high for a package that we use for fixed effect
regression package. It should contribute <em>a lot</em> to our
productivity, otherwise why bother learning it?</p>
</div>
<div class="section level2">
<h2 id="rolling-it-ourselves">Rolling it ourselves<a class="anchor" aria-label="anchor" href="#rolling-it-ourselves"></a>
</h2>
<p>Remember from class that doing the “within” fixed effects estimator
is the same as running OLS with dummy variables for each group id. So we
can definitely do that ourselves.</p>
<p>The data that I’ll use for this example is the wage panel data from
your problem set. I’ll filter out a couple years.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span></span>
<span>    <span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">read_dta</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"wagepan.dta"</span>, package <span class="op">=</span> <span class="st">"metrics.in.r"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&lt;</span> <span class="fl">1983</span><span class="op">)</span></span></code></pre></div>
<p>The group id is the variable <code>nr</code> and the year ID is
<code>year</code>. Let’s estimate the two-way fixed effects model</p>
<p><span class="math display">\[
lwage_{it} = \beta_1 + \beta_2 union_{it} + \delta_i + \delta_t + u_{it}
\]</span></p>
<p>In other words, we care about the returns to union membership in
percentage terms, controlling for unobserved heterogeneity across years
and individuals.</p>
<p>Categorical variables in R are called “factors.” If we put them in
the regression formula, then R will create dummy variables for the
actual regression. Hence, let’s convert <code>year</code> and
<code>nr</code> to factors in our formula and estimate this model via
OLS:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">lwage</span> <span class="op">~</span> <span class="va">union</span> <span class="op">+</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">nr</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://forcats.tidyverse.org/reference/as_factor.html" class="external-link">as_factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## Call:</span></span>
<span><span class="co">## lm(formula = lwage ~ union + as_factor(nr) + as_factor(year), </span></span>
<span><span class="co">##     data = data)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Coefficients:</span></span>
<span><span class="co">##         (Intercept)                union      as_factor(nr)17  </span></span>
<span><span class="co">##           1.3266008            0.1181125            0.1588673  </span></span>
<span><span class="co">##     as_factor(nr)18      as_factor(nr)45     as_factor(nr)110  </span></span>
<span><span class="co">##           0.2020454            0.1085325            0.4930897  </span></span>
<span><span class="co">##    as_factor(nr)120     as_factor(nr)126     as_factor(nr)150  </span></span>
<span><span class="co">##          -0.4121125            0.5466180           -0.2345779  </span></span>
<span><span class="co">##    as_factor(nr)162     as_factor(nr)166     as_factor(nr)189  </span></span>
<span><span class="co">##          -0.5460605           -0.4402726           -0.2809320  </span></span>
<span><span class="co">##    as_factor(nr)193     as_factor(nr)209     as_factor(nr)212  </span></span>
<span><span class="co">##           0.5350933            0.1282157            0.5110860  </span></span>
<span><span class="co">##    as_factor(nr)218     as_factor(nr)243     as_factor(nr)259  </span></span>
<span><span class="co">##           0.6580525            0.2204271            0.5358792  </span></span>
<span><span class="co">##    as_factor(nr)260     as_factor(nr)309     as_factor(nr)351  </span></span>
<span><span class="co">##           0.2863690            0.6847195            0.0749453  </span></span>
<span><span class="co">##    as_factor(nr)353     as_factor(nr)383     as_factor(nr)408  </span></span>
<span><span class="co">##           0.3106510            0.0982151            0.2486188  </span></span>
<span><span class="co">##    as_factor(nr)424     as_factor(nr)464     as_factor(nr)483  </span></span>
<span><span class="co">##           0.8659802           -0.4005279            0.2741420  </span></span>
<span><span class="co">##    as_factor(nr)556     as_factor(nr)560     as_factor(nr)569  </span></span>
<span><span class="co">##           0.6477222            0.0687833           -0.5581998  </span></span>
<span><span class="co">##    as_factor(nr)583     as_factor(nr)647     as_factor(nr)658  </span></span>
<span><span class="co">##           0.2845939           -0.0685340            0.2440167  </span></span>
<span><span class="co">##    as_factor(nr)684     as_factor(nr)711     as_factor(nr)729  </span></span>
<span><span class="co">##           1.0114142            0.0040234            0.8119867  </span></span>
<span><span class="co">##    as_factor(nr)731     as_factor(nr)732     as_factor(nr)793  </span></span>
<span><span class="co">##          -0.0497423            0.1089600            0.1494168  </span></span>
<span><span class="co">##    as_factor(nr)797     as_factor(nr)800     as_factor(nr)813  </span></span>
<span><span class="co">##           0.1684761            0.0246981           -0.5291300  </span></span>
<span><span class="co">##    as_factor(nr)823     as_factor(nr)827     as_factor(nr)847  </span></span>
<span><span class="co">##          -1.0594719           -0.2008313            0.1615324  </span></span>
<span><span class="co">##    as_factor(nr)851     as_factor(nr)863     as_factor(nr)873  </span></span>
<span><span class="co">##           0.4742646            0.1418878           -0.7443141  </span></span>
<span><span class="co">##    as_factor(nr)891     as_factor(nr)908     as_factor(nr)910  </span></span>
<span><span class="co">##           0.6617605           -0.9901529            0.2545301  </span></span>
<span><span class="co">##    as_factor(nr)916     as_factor(nr)919     as_factor(nr)922  </span></span>
<span><span class="co">##          -0.0247005           -0.0563176            0.5330584  </span></span>
<span><span class="co">##    as_factor(nr)924     as_factor(nr)925     as_factor(nr)944  </span></span>
<span><span class="co">##          -0.5603942            0.7388367           -0.4893991  </span></span>
<span><span class="co">##    as_factor(nr)945     as_factor(nr)947     as_factor(nr)955  </span></span>
<span><span class="co">##          -0.2056538            0.7894674            0.4688771  </span></span>
<span><span class="co">##    as_factor(nr)965     as_factor(nr)996    as_factor(nr)1007  </span></span>
<span><span class="co">##           0.0011922            0.0024493            0.1569972  </span></span>
<span><span class="co">##   as_factor(nr)1054    as_factor(nr)1064    as_factor(nr)1081  </span></span>
<span><span class="co">##          -0.1986985            0.5142225           -0.1308018  </span></span>
<span><span class="co">##   as_factor(nr)1085    as_factor(nr)1091    as_factor(nr)1094  </span></span>
<span><span class="co">##           0.1031126           -0.3927281            0.0006299  </span></span>
<span><span class="co">##   as_factor(nr)1096    as_factor(nr)1098    as_factor(nr)1102  </span></span>
<span><span class="co">##          -0.2450096            0.7203420            0.1591198  </span></span>
<span><span class="co">##   as_factor(nr)1107    as_factor(nr)1142    as_factor(nr)1156  </span></span>
<span><span class="co">##           0.1643931            0.2420108           -0.1146136  </span></span>
<span><span class="co">##   as_factor(nr)1180    as_factor(nr)1190    as_factor(nr)1204  </span></span>
<span><span class="co">##           0.2527814           -0.0646183            0.2655009  </span></span>
<span><span class="co">##   as_factor(nr)1249    as_factor(nr)1272    as_factor(nr)1311  </span></span>
<span><span class="co">##           0.0844531            0.3144074           -0.1595409  </span></span>
<span><span class="co">##   as_factor(nr)1316    as_factor(nr)1318    as_factor(nr)1345  </span></span>
<span><span class="co">##           0.2778284           -0.1365694           -0.4484422  </span></span>
<span><span class="co">##   as_factor(nr)1397    as_factor(nr)1434    as_factor(nr)1492  </span></span>
<span><span class="co">##           0.0959715           -0.6605361            0.0934701  </span></span>
<span><span class="co">##   as_factor(nr)1496    as_factor(nr)1506    as_factor(nr)1515  </span></span>
<span><span class="co">##          -0.7466057            0.0725290           -0.2513917  </span></span>
<span><span class="co">##   as_factor(nr)1520    as_factor(nr)1528    as_factor(nr)1554  </span></span>
<span><span class="co">##          -0.1445889           -0.3049101           -0.1505543  </span></span>
<span><span class="co">##   as_factor(nr)1575    as_factor(nr)1576    as_factor(nr)1628  </span></span>
<span><span class="co">##           0.2733155           -0.0141681           -0.1800837  </span></span>
<span><span class="co">##   as_factor(nr)1641    as_factor(nr)1644    as_factor(nr)1653  </span></span>
<span><span class="co">##           0.7133776           -0.2519397           -0.3808045  </span></span>
<span><span class="co">##   as_factor(nr)1654    as_factor(nr)1721    as_factor(nr)1742  </span></span>
<span><span class="co">##           0.1314616            0.4504153            0.1680601  </span></span>
<span><span class="co">##   as_factor(nr)1744    as_factor(nr)1763    as_factor(nr)1777  </span></span>
<span><span class="co">##           0.1545325           -0.5249411           -0.2199798  </span></span>
<span><span class="co">##   as_factor(nr)1843    as_factor(nr)1891    as_factor(nr)1895  </span></span>
<span><span class="co">##           0.9471332           -0.4396996            0.1992381  </span></span>
<span><span class="co">##   as_factor(nr)1899    as_factor(nr)1925    as_factor(nr)1930  </span></span>
<span><span class="co">##          -0.0689627           -0.0209432           -0.3039736  </span></span>
<span><span class="co">##   as_factor(nr)1961    as_factor(nr)1963    as_factor(nr)1979  </span></span>
<span><span class="co">##           0.2004823            0.2175404            0.4192028  </span></span>
<span><span class="co">##   as_factor(nr)1988    as_factor(nr)2000    as_factor(nr)2014  </span></span>
<span><span class="co">##          -0.3547352            0.3390797            0.4306733  </span></span>
<span><span class="co">##   as_factor(nr)2025    as_factor(nr)2038    as_factor(nr)2075  </span></span>
<span><span class="co">##          -0.0088173           -0.3322481            0.3358691  </span></span>
<span><span class="co">##   as_factor(nr)2101    as_factor(nr)2106    as_factor(nr)2107  </span></span>
<span><span class="co">##           0.7448600            0.1274726           -0.0777436  </span></span>
<span><span class="co">##   as_factor(nr)2108    as_factor(nr)2147    as_factor(nr)2157  </span></span>
<span><span class="co">##           0.3293251           -1.4220602           -0.3080365  </span></span>
<span><span class="co">##   as_factor(nr)2163    as_factor(nr)2173    as_factor(nr)2180  </span></span>
<span><span class="co">##           0.6401244           -0.1349283           -0.1263657  </span></span>
<span><span class="co">##   as_factor(nr)2183    as_factor(nr)2216    as_factor(nr)2220  </span></span>
<span><span class="co">##          -0.0503839            0.1857614            0.3705435  </span></span>
<span><span class="co">##   as_factor(nr)2227    as_factor(nr)2264    as_factor(nr)2306  </span></span>
<span><span class="co">##          -0.1358223           -0.3091959           -0.6756233  </span></span>
<span><span class="co">##   as_factor(nr)2312    as_factor(nr)2314    as_factor(nr)2329  </span></span>
<span><span class="co">##           0.3355878            0.5290060            0.3244606  </span></span>
<span><span class="co">##   as_factor(nr)2335    as_factor(nr)2341    as_factor(nr)2351  </span></span>
<span><span class="co">##           0.0383447           -0.3232691           -0.3374433  </span></span>
<span><span class="co">##   as_factor(nr)2386    as_factor(nr)2401    as_factor(nr)2413  </span></span>
<span><span class="co">##          -0.7008390           -0.1342346            0.6445750  </span></span>
<span><span class="co">##   as_factor(nr)2421    as_factor(nr)2445    as_factor(nr)2451  </span></span>
<span><span class="co">##          -0.1786544           -0.0166565            0.2330834  </span></span>
<span><span class="co">##   as_factor(nr)2494    as_factor(nr)2508    as_factor(nr)2535  </span></span>
<span><span class="co">##          -0.7329064            0.4873586            0.1781931  </span></span>
<span><span class="co">##   as_factor(nr)2540    as_factor(nr)2685    as_factor(nr)2711  </span></span>
<span><span class="co">##          -0.3678554            0.4867136           -0.3197433  </span></span>
<span><span class="co">##   as_factor(nr)2718    as_factor(nr)2721    as_factor(nr)2733  </span></span>
<span><span class="co">##           0.6427425            0.0711279           -0.5114629  </span></span>
<span><span class="co">##   as_factor(nr)2741    as_factor(nr)2745    as_factor(nr)2751  </span></span>
<span><span class="co">##          -0.0656126            0.3165448            0.1089606  </span></span>
<span><span class="co">##   as_factor(nr)2774    as_factor(nr)2801    as_factor(nr)2813  </span></span>
<span><span class="co">##           0.7161539           -0.2499014           -0.2545656  </span></span>
<span><span class="co">##   as_factor(nr)2833    as_factor(nr)2839    as_factor(nr)2842  </span></span>
<span><span class="co">##           0.4127922            0.2038677            0.2398360  </span></span>
<span><span class="co">##   as_factor(nr)2866    as_factor(nr)2868    as_factor(nr)2874  </span></span>
<span><span class="co">##           0.1589736            0.4256432           -0.6921180  </span></span>
<span><span class="co">##   as_factor(nr)2916    as_factor(nr)2951    as_factor(nr)2980  </span></span>
<span><span class="co">##           0.1074157           -0.2764584            0.0331924  </span></span>
<span><span class="co">##   as_factor(nr)2994    as_factor(nr)2997    as_factor(nr)3017  </span></span>
<span><span class="co">##           0.0254400            0.2189687            0.1251911  </span></span>
<span><span class="co">##   as_factor(nr)3037    as_factor(nr)3059    as_factor(nr)3062  </span></span>
<span><span class="co">##           0.5988740            0.2389050            0.7489376  </span></span>
<span><span class="co">##   as_factor(nr)3100    as_factor(nr)3102    as_factor(nr)3127  </span></span>
<span><span class="co">##          -0.0332785           -0.7166815           -1.0250521  </span></span>
<span><span class="co">##   as_factor(nr)3136    as_factor(nr)3137    as_factor(nr)3138  </span></span>
<span><span class="co">##           0.2869289            0.4581664            0.2596971  </span></span>
<span><span class="co">##   as_factor(nr)3140    as_factor(nr)3193    as_factor(nr)3196  </span></span>
<span><span class="co">##           0.4143431            0.0051748            0.3669188  </span></span>
<span><span class="co">##   as_factor(nr)3200    as_factor(nr)3202    as_factor(nr)3207  </span></span>
<span><span class="co">##           0.1586095            0.2291555            0.1892850  </span></span>
<span><span class="co">##   as_factor(nr)3208    as_factor(nr)3210    as_factor(nr)3215  </span></span>
<span><span class="co">##           0.3125633            0.1541200           -0.0896639  </span></span>
<span><span class="co">##   as_factor(nr)3219    as_factor(nr)3226    as_factor(nr)3235  </span></span>
<span><span class="co">##          -0.3633334           -0.3335658           -0.1901436  </span></span>
<span><span class="co">##   as_factor(nr)3239    as_factor(nr)3271    as_factor(nr)3275  </span></span>
<span><span class="co">##          -0.6941492           -0.0585147           -0.1518026  </span></span>
<span><span class="co">##   as_factor(nr)3282    as_factor(nr)3289    as_factor(nr)3290  </span></span>
<span><span class="co">##           0.0018243           -0.1431946           -0.0725325  </span></span>
<span><span class="co">##   as_factor(nr)3307    as_factor(nr)3333    as_factor(nr)3353  </span></span>
<span><span class="co">##           0.7359895           -0.8625462           -0.4078738  </span></span>
<span><span class="co">##   as_factor(nr)3380    as_factor(nr)3381    as_factor(nr)3389  </span></span>
<span><span class="co">##           0.0537697            0.0717494            0.1657350  </span></span>
<span><span class="co">##   as_factor(nr)3394    as_factor(nr)3401    as_factor(nr)3414  </span></span>
<span><span class="co">##           0.5586050           -0.2521901            0.4222398  </span></span>
<span><span class="co">##   as_factor(nr)3420    as_factor(nr)3440    as_factor(nr)3461  </span></span>
<span><span class="co">##           0.0271526           -1.2838070            0.2180308  </span></span>
<span><span class="co">##   as_factor(nr)3468    as_factor(nr)3482    as_factor(nr)3495  </span></span>
<span><span class="co">##           0.0166458            0.6722500            0.0808619  </span></span>
<span><span class="co">##   as_factor(nr)3503    as_factor(nr)3525    as_factor(nr)3526  </span></span>
<span><span class="co">##           0.5833753            0.0781587            0.2117918  </span></span>
<span><span class="co">##   as_factor(nr)3538    as_factor(nr)3563    as_factor(nr)3575  </span></span>
<span><span class="co">##           0.5578160            0.1964154            0.5930825  </span></span>
<span><span class="co">##   as_factor(nr)3580    as_factor(nr)3581    as_factor(nr)3589  </span></span>
<span><span class="co">##           0.0787277           -0.2308375           -0.4741645  </span></span>
<span><span class="co">##   as_factor(nr)3591    as_factor(nr)3598    as_factor(nr)3602  </span></span>
<span><span class="co">##           0.1519407            0.4057427            0.6102853  </span></span>
<span><span class="co">##   as_factor(nr)3607    as_factor(nr)3621    as_factor(nr)3628  </span></span>
<span><span class="co">##          -1.0411348            0.1111698            0.5311493  </span></span>
<span><span class="co">##   as_factor(nr)3653    as_factor(nr)3706    as_factor(nr)3707  </span></span>
<span><span class="co">##           0.4608529            0.2360062           -0.5906132  </span></span>
<span><span class="co">##   as_factor(nr)3708    as_factor(nr)3743    as_factor(nr)3777  </span></span>
<span><span class="co">##           0.2191805            0.1389024            0.4747418  </span></span>
<span><span class="co">##   as_factor(nr)3831    as_factor(nr)3844    as_factor(nr)3847  </span></span>
<span><span class="co">##          -0.1015208            0.0416051            0.7525291  </span></span>
<span><span class="co">##   as_factor(nr)3848    as_factor(nr)3882    as_factor(nr)3937  </span></span>
<span><span class="co">##           0.4888822           -0.7672207           -0.0710730  </span></span>
<span><span class="co">##   as_factor(nr)4000    as_factor(nr)4004    as_factor(nr)4025  </span></span>
<span><span class="co">##           0.2527725            0.6296114           -0.2607890  </span></span>
<span><span class="co">##   as_factor(nr)4032    as_factor(nr)4046    as_factor(nr)4088  </span></span>
<span><span class="co">##          -0.3283376            0.0409790            0.8845383  </span></span>
<span><span class="co">##   as_factor(nr)4091    as_factor(nr)4122    as_factor(nr)4127  </span></span>
<span><span class="co">##           1.0121476            0.4747729           -0.0337868  </span></span>
<span><span class="co">##   as_factor(nr)4128    as_factor(nr)4159    as_factor(nr)4204  </span></span>
<span><span class="co">##          -0.4703832            0.4559191           -0.0946723  </span></span>
<span><span class="co">##   as_factor(nr)4229    as_factor(nr)4258    as_factor(nr)4261  </span></span>
<span><span class="co">##           0.0579366            0.5815351            0.4183856  </span></span>
<span><span class="co">##   as_factor(nr)4264    as_factor(nr)4278    as_factor(nr)4297  </span></span>
<span><span class="co">##          -0.2256458            0.3754312            0.4935033  </span></span>
<span><span class="co">##   as_factor(nr)4302    as_factor(nr)4321    as_factor(nr)4328  </span></span>
<span><span class="co">##          -0.3179859            0.1724987            0.0384778  </span></span>
<span><span class="co">##   as_factor(nr)4332    as_factor(nr)4335    as_factor(nr)4357  </span></span>
<span><span class="co">##          -0.9461914            0.1431209            0.3664675  </span></span>
<span><span class="co">##   as_factor(nr)4365    as_factor(nr)4380    as_factor(nr)4394  </span></span>
<span><span class="co">##          -0.9217202            0.3694399            0.4465017  </span></span>
<span><span class="co">##   as_factor(nr)4510    as_factor(nr)4559    as_factor(nr)4563  </span></span>
<span><span class="co">##           0.0640553           -0.0683127           -0.4918190  </span></span>
<span><span class="co">##   as_factor(nr)4569    as_factor(nr)4603    as_factor(nr)4607  </span></span>
<span><span class="co">##           0.6114778            0.4868630           -0.4827456  </span></span>
<span><span class="co">##   as_factor(nr)4633    as_factor(nr)4676    as_factor(nr)4701  </span></span>
<span><span class="co">##           0.1175835           -0.5715178            0.3091466  </span></span>
<span><span class="co">##   as_factor(nr)4716    as_factor(nr)4720    as_factor(nr)4759  </span></span>
<span><span class="co">##          -0.3159763            0.7021370            0.1199122  </span></span>
<span><span class="co">##   as_factor(nr)4791    as_factor(nr)4811    as_factor(nr)4828  </span></span>
<span><span class="co">##           0.2497200           -0.6078364           -0.0345333  </span></span>
<span><span class="co">##   as_factor(nr)4857    as_factor(nr)4858    as_factor(nr)4859  </span></span>
<span><span class="co">##          -0.4686019            0.2787164           -0.2965494  </span></span>
<span><span class="co">##   as_factor(nr)4866    as_factor(nr)4881    as_factor(nr)4884  </span></span>
<span><span class="co">##           0.2704070           -0.0484928            0.1306036  </span></span>
<span><span class="co">##   as_factor(nr)4888    as_factor(nr)4901    as_factor(nr)4917  </span></span>
<span><span class="co">##          -0.0729494           -0.4033223           -0.3886961  </span></span>
<span><span class="co">##   as_factor(nr)4926    as_factor(nr)4982    as_factor(nr)5017  </span></span>
<span><span class="co">##           0.0838707           -0.3130062            0.6689182  </span></span>
<span><span class="co">##   as_factor(nr)5033    as_factor(nr)5048    as_factor(nr)5122  </span></span>
<span><span class="co">##           0.7467193           -0.4758237            0.1132699  </span></span>
<span><span class="co">##   as_factor(nr)5141    as_factor(nr)5147    as_factor(nr)5158  </span></span>
<span><span class="co">##           0.5984766            0.6499833            0.3148903  </span></span>
<span><span class="co">##   as_factor(nr)5221    as_factor(nr)5223    as_factor(nr)5227  </span></span>
<span><span class="co">##           0.0061269            0.3485008            0.1359778  </span></span>
<span><span class="co">##   as_factor(nr)5248    as_factor(nr)5252    as_factor(nr)5263  </span></span>
<span><span class="co">##          -0.0064682           -0.3008864            0.2013024  </span></span>
<span><span class="co">##   as_factor(nr)5274    as_factor(nr)5335    as_factor(nr)5345  </span></span>
<span><span class="co">##           0.6845062            0.2477231           -0.2279034  </span></span>
<span><span class="co">##   as_factor(nr)5359    as_factor(nr)5368    as_factor(nr)5377  </span></span>
<span><span class="co">##          -0.6833245           -0.3685628            0.1730136  </span></span>
<span><span class="co">##   as_factor(nr)5390    as_factor(nr)5419    as_factor(nr)5435  </span></span>
<span><span class="co">##           0.0543443           -0.6859831           -0.2344141  </span></span>
<span><span class="co">##   as_factor(nr)5437    as_factor(nr)5497    as_factor(nr)5525  </span></span>
<span><span class="co">##           0.0170750            0.0234595           -0.1783761  </span></span>
<span><span class="co">##   as_factor(nr)5529    as_factor(nr)5531    as_factor(nr)5579  </span></span>
<span><span class="co">##           0.0172448            0.1457726           -0.0699605  </span></span>
<span><span class="co">##   as_factor(nr)5588    as_factor(nr)5599    as_factor(nr)5650  </span></span>
<span><span class="co">##           0.2630069            0.3407023           -0.1208191  </span></span>
<span><span class="co">##   as_factor(nr)5660    as_factor(nr)5665    as_factor(nr)5666  </span></span>
<span><span class="co">##           0.4535081            0.0107198            0.1969140  </span></span>
<span><span class="co">##   as_factor(nr)5698    as_factor(nr)5699    as_factor(nr)5731  </span></span>
<span><span class="co">##           0.1984593            0.4502924           -0.2856565  </span></span>
<span><span class="co">##   as_factor(nr)5750    as_factor(nr)5755    as_factor(nr)5772  </span></span>
<span><span class="co">##          -0.1740283           -0.1905782           -0.8609714  </span></span>
<span><span class="co">##   as_factor(nr)5816    as_factor(nr)5823    as_factor(nr)5851  </span></span>
<span><span class="co">##          -0.0187679           -0.3477545           -0.9044465  </span></span>
<span><span class="co">##   as_factor(nr)5857    as_factor(nr)5859    as_factor(nr)6016  </span></span>
<span><span class="co">##          -0.0862892            0.3791638            0.4305080  </span></span>
<span><span class="co">##   as_factor(nr)6020    as_factor(nr)6025    as_factor(nr)6056  </span></span>
<span><span class="co">##          -0.9549249           -0.7689466           -0.4011752  </span></span>
<span><span class="co">##   as_factor(nr)6094    as_factor(nr)6186    as_factor(nr)6395  </span></span>
<span><span class="co">##           0.2459698            0.1857773            0.1365430  </span></span>
<span><span class="co">##   as_factor(nr)6430    as_factor(nr)6446    as_factor(nr)6463  </span></span>
<span><span class="co">##          -0.2188987            0.0968964           -0.2284774  </span></span>
<span><span class="co">##   as_factor(nr)6558    as_factor(nr)6559    as_factor(nr)6561  </span></span>
<span><span class="co">##           0.5599927            0.0003910            0.5342971  </span></span>
<span><span class="co">##   as_factor(nr)6574    as_factor(nr)6648    as_factor(nr)6813  </span></span>
<span><span class="co">##          -0.2562681            0.6453238           -0.0793298  </span></span>
<span><span class="co">##   as_factor(nr)6824    as_factor(nr)6888    as_factor(nr)6942  </span></span>
<span><span class="co">##          -0.1461823           -0.5690177            0.0183179  </span></span>
<span><span class="co">##   as_factor(nr)6954    as_factor(nr)6955    as_factor(nr)6964  </span></span>
<span><span class="co">##           0.5417778            0.4500903           -0.0043564  </span></span>
<span><span class="co">##   as_factor(nr)6987    as_factor(nr)7025    as_factor(nr)7043  </span></span>
<span><span class="co">##           1.2720637            0.3481714            0.1488308  </span></span>
<span><span class="co">##   as_factor(nr)7060    as_factor(nr)7087    as_factor(nr)7238  </span></span>
<span><span class="co">##           0.2119258           -0.5611468           -0.0607624  </span></span>
<span><span class="co">##   as_factor(nr)7279    as_factor(nr)7342    as_factor(nr)7343  </span></span>
<span><span class="co">##          -0.1919030           -0.0237805           -0.0089601  </span></span>
<span><span class="co">##   as_factor(nr)7411    as_factor(nr)7424    as_factor(nr)7429  </span></span>
<span><span class="co">##          -0.3824880           -0.0101679            0.0906558  </span></span>
<span><span class="co">##   as_factor(nr)7454    as_factor(nr)7472    as_factor(nr)7474  </span></span>
<span><span class="co">##           0.1976527           -0.0748980           -0.0093243  </span></span>
<span><span class="co">##   as_factor(nr)7509    as_factor(nr)7539    as_factor(nr)7769  </span></span>
<span><span class="co">##           0.0067496           -0.3042770            0.3479501  </span></span>
<span><span class="co">##   as_factor(nr)7783    as_factor(nr)7784    as_factor(nr)7801  </span></span>
<span><span class="co">##          -0.0634716            1.3091200           -0.4832790  </span></span>
<span><span class="co">##   as_factor(nr)7824    as_factor(nr)7874    as_factor(nr)7887  </span></span>
<span><span class="co">##           0.1444155            0.7831218            0.0800170  </span></span>
<span><span class="co">##   as_factor(nr)7923    as_factor(nr)7926    as_factor(nr)8021  </span></span>
<span><span class="co">##           0.7046102            0.2593901            0.2063953  </span></span>
<span><span class="co">##   as_factor(nr)8087    as_factor(nr)8089    as_factor(nr)8090  </span></span>
<span><span class="co">##           0.6271278            0.2188360            0.1581329  </span></span>
<span><span class="co">##   as_factor(nr)8096    as_factor(nr)8106    as_factor(nr)8107  </span></span>
<span><span class="co">##           0.1673140            0.0974152           -0.1696652  </span></span>
<span><span class="co">##   as_factor(nr)8142    as_factor(nr)8168    as_factor(nr)8173  </span></span>
<span><span class="co">##          -0.0643015            0.2804680            0.0359172  </span></span>
<span><span class="co">##   as_factor(nr)8203    as_factor(nr)8211    as_factor(nr)8224  </span></span>
<span><span class="co">##           0.7694466           -0.3648051            0.5093971  </span></span>
<span><span class="co">##   as_factor(nr)8272    as_factor(nr)8300    as_factor(nr)8304  </span></span>
<span><span class="co">##           0.5386226            0.0924080            0.2796535  </span></span>
<span><span class="co">##   as_factor(nr)8364    as_factor(nr)8370    as_factor(nr)8381  </span></span>
<span><span class="co">##           0.2509439            0.5182665           -0.3088516  </span></span>
<span><span class="co">##   as_factor(nr)8388    as_factor(nr)8406    as_factor(nr)8415  </span></span>
<span><span class="co">##           0.0164486           -0.0082910           -0.4285644  </span></span>
<span><span class="co">##   as_factor(nr)8496    as_factor(nr)8501    as_factor(nr)8518  </span></span>
<span><span class="co">##          -0.3625736           -0.5540992            0.6107016  </span></span>
<span><span class="co">##   as_factor(nr)8520    as_factor(nr)8524    as_factor(nr)8548  </span></span>
<span><span class="co">##          -0.4697766           -0.0468748           -0.2537187  </span></span>
<span><span class="co">##   as_factor(nr)8556    as_factor(nr)8564    as_factor(nr)8581  </span></span>
<span><span class="co">##           0.2608849           -0.2831687           -0.3909871  </span></span>
<span><span class="co">##   as_factor(nr)8586    as_factor(nr)8587    as_factor(nr)8597  </span></span>
<span><span class="co">##          -0.5064964           -0.5115870           -0.0733811  </span></span>
<span><span class="co">##   as_factor(nr)8656    as_factor(nr)8722    as_factor(nr)8743  </span></span>
<span><span class="co">##          -0.0526669            0.2179461            0.3876560  </span></span>
<span><span class="co">##   as_factor(nr)8749    as_factor(nr)8758    as_factor(nr)8796  </span></span>
<span><span class="co">##           0.0933591           -0.0441302            0.2133917  </span></span>
<span><span class="co">##   as_factor(nr)8838    as_factor(nr)8842    as_factor(nr)8846  </span></span>
<span><span class="co">##           0.0575352           -0.3392368           -0.2420697  </span></span>
<span><span class="co">##   as_factor(nr)8860    as_factor(nr)8862    as_factor(nr)8880  </span></span>
<span><span class="co">##          -0.2235111           -0.0359877            0.7517817  </span></span>
<span><span class="co">##   as_factor(nr)8886    as_factor(nr)8903    as_factor(nr)8908  </span></span>
<span><span class="co">##           0.0580455           -0.7769109           -0.1923077  </span></span>
<span><span class="co">##   as_factor(nr)8911    as_factor(nr)8917    as_factor(nr)8991  </span></span>
<span><span class="co">##          -0.4266092            0.2885122            0.4478844  </span></span>
<span><span class="co">##   as_factor(nr)8997    as_factor(nr)9014    as_factor(nr)9015  </span></span>
<span><span class="co">##           0.4059819            0.1657148           -0.0351953  </span></span>
<span><span class="co">##   as_factor(nr)9027    as_factor(nr)9066    as_factor(nr)9082  </span></span>
<span><span class="co">##           0.4343381           -0.8601727           -0.4743540  </span></span>
<span><span class="co">##   as_factor(nr)9131    as_factor(nr)9132    as_factor(nr)9154  </span></span>
<span><span class="co">##          -0.2932697           -0.0933988            0.8779975  </span></span>
<span><span class="co">##   as_factor(nr)9158    as_factor(nr)9184    as_factor(nr)9230  </span></span>
<span><span class="co">##          -0.1045911           -0.1610132           -0.4958800  </span></span>
<span><span class="co">##   as_factor(nr)9265    as_factor(nr)9367    as_factor(nr)9390  </span></span>
<span><span class="co">##          -0.1977154           -0.4128657           -0.4844774  </span></span>
<span><span class="co">##   as_factor(nr)9391    as_factor(nr)9418    as_factor(nr)9424  </span></span>
<span><span class="co">##          -0.0299420            0.7904038            0.4243795  </span></span>
<span><span class="co">##   as_factor(nr)9447    as_factor(nr)9449    as_factor(nr)9453  </span></span>
<span><span class="co">##          -0.3077446           -0.1947209            0.4245348  </span></span>
<span><span class="co">##   as_factor(nr)9468    as_factor(nr)9502    as_factor(nr)9505  </span></span>
<span><span class="co">##          -0.0323229            0.5159878           -0.3885785  </span></span>
<span><span class="co">##   as_factor(nr)9603    as_factor(nr)9643    as_factor(nr)9667  </span></span>
<span><span class="co">##          -0.2619756            0.2020463            0.3369007  </span></span>
<span><span class="co">##   as_factor(nr)9683    as_factor(nr)9694    as_factor(nr)9710  </span></span>
<span><span class="co">##          -0.3717678            0.4631701            0.1230740  </span></span>
<span><span class="co">##   as_factor(nr)9718    as_factor(nr)9725    as_factor(nr)9744  </span></span>
<span><span class="co">##           0.2802833           -0.0752875            0.3284672  </span></span>
<span><span class="co">##   as_factor(nr)9752    as_factor(nr)9776    as_factor(nr)9786  </span></span>
<span><span class="co">##           0.7241654            0.6713395            0.2011286  </span></span>
<span><span class="co">##   as_factor(nr)9791    as_factor(nr)9794    as_factor(nr)9810  </span></span>
<span><span class="co">##          -0.5056260            0.1197105           -0.3605671  </span></span>
<span><span class="co">##   as_factor(nr)9846    as_factor(nr)9859    as_factor(nr)9868  </span></span>
<span><span class="co">##           0.7610772           -0.0458501           -0.2164203  </span></span>
<span><span class="co">##   as_factor(nr)9876    as_factor(nr)9883    as_factor(nr)9889  </span></span>
<span><span class="co">##           0.3713277           -0.1840586            0.4380360  </span></span>
<span><span class="co">##   as_factor(nr)9901    as_factor(nr)9936    as_factor(nr)9964  </span></span>
<span><span class="co">##           0.2413978            0.0352408           -0.2767415  </span></span>
<span><span class="co">##  as_factor(nr)10043   as_factor(nr)10067   as_factor(nr)10091  </span></span>
<span><span class="co">##          -0.7534264            0.1029372            0.3028379  </span></span>
<span><span class="co">##  as_factor(nr)10120   as_factor(nr)10121   as_factor(nr)10167  </span></span>
<span><span class="co">##          -1.3373992           -0.0363318           -0.0088156  </span></span>
<span><span class="co">##  as_factor(nr)10209   as_factor(nr)10230   as_factor(nr)10265  </span></span>
<span><span class="co">##          -0.3294991            0.2384233            0.5701620  </span></span>
<span><span class="co">##  as_factor(nr)10274   as_factor(nr)10311   as_factor(nr)10392  </span></span>
<span><span class="co">##          -0.2657193            0.2424737           -0.6170507  </span></span>
<span><span class="co">##  as_factor(nr)10425   as_factor(nr)10441   as_factor(nr)10457  </span></span>
<span><span class="co">##           0.7000110           -0.0350489           -0.2657116  </span></span>
<span><span class="co">##  as_factor(nr)10469   as_factor(nr)10524   as_factor(nr)10552  </span></span>
<span><span class="co">##           0.3475650           -0.3469673           -0.3800088  </span></span>
<span><span class="co">##  as_factor(nr)10553   as_factor(nr)10570   as_factor(nr)10593  </span></span>
<span><span class="co">##           0.0645696           -1.7692078           -0.2509685  </span></span>
<span><span class="co">##  as_factor(nr)10666   as_factor(nr)11275   as_factor(nr)11328  </span></span>
<span><span class="co">##          -0.4183513           -0.2120244           -0.0550100  </span></span>
<span><span class="co">##  as_factor(nr)11750   as_factor(nr)11821   as_factor(nr)11857  </span></span>
<span><span class="co">##          -0.0403358            0.2613495            0.5374261  </span></span>
<span><span class="co">##  as_factor(nr)11887   as_factor(nr)11890   as_factor(nr)11892  </span></span>
<span><span class="co">##           0.3225502            0.1174285            0.6613401  </span></span>
<span><span class="co">##  as_factor(nr)11924   as_factor(nr)11925   as_factor(nr)11957  </span></span>
<span><span class="co">##           0.0799755           -0.0187697           -0.8699528  </span></span>
<span><span class="co">##  as_factor(nr)11973   as_factor(nr)11990   as_factor(nr)12012  </span></span>
<span><span class="co">##           0.2197511            0.5290434           -0.1820652  </span></span>
<span><span class="co">##  as_factor(nr)12013   as_factor(nr)12045   as_factor(nr)12055  </span></span>
<span><span class="co">##           0.1499400           -0.2690730            0.2934351  </span></span>
<span><span class="co">##  as_factor(nr)12084   as_factor(nr)12088   as_factor(nr)12122  </span></span>
<span><span class="co">##          -0.5128255           -0.4764069           -0.4007184  </span></span>
<span><span class="co">##  as_factor(nr)12179   as_factor(nr)12182   as_factor(nr)12220  </span></span>
<span><span class="co">##          -0.1753613            0.1061416            0.3412228  </span></span>
<span><span class="co">##  as_factor(nr)12221   as_factor(nr)12245   as_factor(nr)12276  </span></span>
<span><span class="co">##          -0.9974771           -0.5254311            0.1087125  </span></span>
<span><span class="co">##  as_factor(nr)12385   as_factor(nr)12410   as_factor(nr)12420  </span></span>
<span><span class="co">##           0.3013288           -0.6276005            0.1479143  </span></span>
<span><span class="co">##  as_factor(nr)12433   as_factor(nr)12451   as_factor(nr)12477  </span></span>
<span><span class="co">##           0.2379909            0.1411634            0.6686839  </span></span>
<span><span class="co">##  as_factor(nr)12500   as_factor(nr)12534   as_factor(nr)12548  </span></span>
<span><span class="co">##          -0.3389846            0.6202036           -0.3341063  </span></span>
<span><span class="co">## as_factor(year)1981  as_factor(year)1982  </span></span>
<span><span class="co">##           0.1196069            0.1775399</span></span></code></pre>
<p>That’s a lot of output! As you can see, R reports a coefficient
estimate for every dummy variable. You’ll probably want to filter the
results to the variables that you care about, and I’ll do that
below.</p>
<p>In terms of computing standard errors, we <em>almost always</em>
cluster standard errors at the individual level. Remember, the
assumption was that there is some unobservable component unique to each
person that determines wage. If that assumption is true, then residuals
will <em>necessarily</em> be correlated within individuals, so we must
compute standard errors that are robust to this clustered
correlation.</p>
<p>We do that in R using the <code>vcovCL</code> function from
<code>sandwich</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sandwich.R-Forge.R-project.org/" class="external-link">sandwich</a></span><span class="op">)</span></span>
<span><span class="va">V</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://sandwich.R-Forge.R-project.org/reference/vcovCL.html" class="external-link">vcovCL</a></span><span class="op">(</span><span class="va">model</span>, <span class="op">~</span><span class="va">nr</span><span class="op">)</span></span></code></pre></div>
<p>Now we can report our coefficients using <code>coeftest</code> as we
have done in the past. I’ll use the <code>broom</code> package to filter
out all the fixed effect estimates.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://broom.tidymodels.org/" class="external-link">broom</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">lmtest</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/coeftest.html" class="external-link">coeftest</a></span><span class="op">(</span><span class="va">model</span>, <span class="va">V</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../../reference/pipe.html">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">term</span> <span class="op">==</span> <span class="st">"union"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 1 × 5</span></span></span>
<span><span class="co">##   term  estimate std.error statistic p.value</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> union    0.118    0.049<span style="text-decoration: underline;">2</span>      2.40  0.016<span style="text-decoration: underline;">4</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="using-someone-elses-code">Using someone else’s code<a class="anchor" aria-label="anchor" href="#using-someone-elses-code"></a>
</h2>
<p>There’s two main libraries that you will probably use for panel data:
<code>plm</code> and <code>fixest</code>. The former has been around
longer and is endorsed by the <a href="https://www.econometrics-with-r.org/" class="external-link">Intro to Econometrics with
R</a> authors. The latter has been endorsed by… me, and there are other
people that I know are switching to <code>fixest</code>. I’ll refer you
to <a href="https://www.econometrics-with-r.org/10.3-fixed-effects-regression.html" class="external-link">Section
10.3</a> of <em>Intro to Metrics with R</em> if you’re interested in
<code>plm</code> and talk about <code>fixest</code> here.</p>
<p>The thing that I like about <code>fixest</code> is its sensible
treatment of standard errors and its functions for exporting regression
tables. In order to fit a fixed effect model, you just need to use a
vertical bar in your formula:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lrberge.github.io/fixest/" class="external-link">fixest</a></span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lrberge.github.io/fixest/reference/feols.html" class="external-link">feols</a></span><span class="op">(</span><span class="va">lwage</span> <span class="op">~</span> <span class="va">union</span> <span class="op">|</span> <span class="va">nr</span> <span class="op">+</span> <span class="va">year</span>, data <span class="op">=</span> <span class="va">data</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## OLS estimation, Dep. Var.: lwage</span></span>
<span><span class="co">## Observations: 1,635 </span></span>
<span><span class="co">## Fixed-effects: nr: 545,  year: 3</span></span>
<span><span class="co">## Standard-errors: Clustered (nr) </span></span>
<span><span class="co">##       Estimate Std. Error t value  Pr(&gt;|t|)    </span></span>
<span><span class="co">## union 0.118113   0.040125 2.94364 0.0033823 ** </span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span><span class="co">## RMSE: 0.305418     Adj. R2: 0.507916</span></span>
<span><span class="co">##                  Within R2: 0.009123</span></span></code></pre>
<p>Two things that are nice: It doesn’t print all of the fixed effect
values like in lm. You can get them by running
<code>fixef(model)</code>, but it’s not printed in regression output by
default.</p>
<p>Also, you can see that it clusters standard errors at the level of
the first fixed effect by default. That is the correct default to use,
and you can use other type of standard errors if you like. There is <a href="https://lrberge.github.io/fixest/articles/standard_errors.html" class="external-link">extensive</a>
<a href="https://lrberge.github.io/fixest/reference/index.html#standard-errors" class="external-link">documentation</a>
on the author’s website talking about standard errors, which is an
exception for software packages.</p>
<p>The export features are the last thing that I like about
<code>fixest</code>. You’ll care a lot more about this when you’re
writing papers, but it’s nice to just have one function that has good
defaults (it looks good in LaTeX).</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://lrberge.github.io/fixest/reference/setFixest_dict.html" class="external-link">setFixest_dict</a></span><span class="op">(</span></span>
<span>    lwage <span class="op">=</span> <span class="st">"log(wage)"</span>,</span>
<span>    nr <span class="op">=</span> <span class="st">"Individual"</span>,</span>
<span>    year <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span>    union <span class="op">=</span> <span class="st">"In union (0 or 1)"</span></span>
<span><span class="op">)</span></span>
<span><span class="fu"><a href="https://lrberge.github.io/fixest/reference/etable.html" class="external-link">etable</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                               model</span></span>
<span><span class="co">## Dependent Var.:           log(wage)</span></span>
<span><span class="co">##                                    </span></span>
<span><span class="co">## In union (0 or 1) 0.1181** (0.0401)</span></span>
<span><span class="co">## Fixed-Effects:    -----------------</span></span>
<span><span class="co">## Individual                      Yes</span></span>
<span><span class="co">## Year                            Yes</span></span>
<span><span class="co">## _________________ _________________</span></span>
<span><span class="co">## S.E.: Clustered      by: Individual</span></span>
<span><span class="co">## Observations                  1,635</span></span>
<span><span class="co">## R2                          0.67265</span></span>
<span><span class="co">## Within R2                   0.00912</span></span>
<span><span class="co">## ---</span></span>
<span><span class="co">## Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>As you go on, there will be more things that you <em>could</em> do
yourself, but maybe it’s easier to learn to use a package that already
does it. It’s a fixed cost to learn, and a constraint that you can only
do what the package has implemented. That’s not to discourage you from
using extra packages, but rather encouragement to take on the challenge
and do it yourself sometimes. You learn more that way.</p>
<hr>
<p>Happy Coding!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nathan Gardner Hattersley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
